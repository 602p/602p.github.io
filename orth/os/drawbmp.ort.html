<html>
		<head>
			<title>drawbmp.ort</title>
			<link rel="stylesheet" type="text/css" href="syntax.css">
		</head>
		<body>
			<pre>

<a href="./framebuffer.ort.html"><span class="orth-T_IMPORT">import framebuffer</span></a><br/><a href="./mbdata.ort.html"><span class="orth-T_IMPORT">import mbdata</span></a><br/><br/><span class="orth-T_TYPEDECL">type</span><span class="orth-T_WHITESPACE"> </span><span class="orth-T_TYPEDECL_NAME">BMP24ColorCell</span><span class="orth-T_WHITESPACE"> </span><span class="orth-T_TYPEDECL_IS">is</span><span class="orth-T_WHITESPACE"> </span><span class="orth-T_TYPEDECL_PACKED">packed</span><br/><span class="orth-T_WHITESPACE">	</span><span class="orth-T_VAR_DECL-type">byte</span> <span class="orth-T_VAR_DECL-name">b</span><br/><span class="orth-T_WHITESPACE">	</span><span class="orth-T_VAR_DECL-type">byte</span> <span class="orth-T_VAR_DECL-name">g</span><br/><span class="orth-T_WHITESPACE">	</span><span class="orth-T_VAR_DECL-type">byte</span> <span class="orth-T_VAR_DECL-name">r</span><br/><span class="orth-T_TYPEDECL_END">endtype</span><br/><br/><span class="orth-T_TYPEDECL">type</span><span class="orth-T_WHITESPACE"> </span><span class="orth-T_TYPEDECL_NAME">BMPImage</span><span class="orth-T_WHITESPACE"> </span><span class="orth-T_TYPEDECL_IS">is</span><span class="orth-T_WHITESPACE"> </span><span class="orth-T_TYPEDECL_PACKED">packed</span><br/><span class="orth-T_WHITESPACE">	</span><span class="orth-T_VAR_DECL-type">byte</span> <span class="orth-T_VAR_DECL-name">magic_B</span><br/><span class="orth-T_WHITESPACE">	</span><span class="orth-T_VAR_DECL-type">byte</span> <span class="orth-T_VAR_DECL-name">magic_M</span><br/><span class="orth-T_WHITESPACE">	</span><span class="orth-T_VAR_DECL-type">int</span> <span class="orth-T_VAR_DECL-name">size</span><br/><span class="orth-T_WHITESPACE">	</span><span class="orth-T_VAR_DECL-type">int</span> <span class="orth-T_VAR_DECL-name">reserved</span><br/><span class="orth-T_WHITESPACE">	</span><span class="orth-T_VAR_DECL-type">int</span> <span class="orth-T_VAR_DECL-name">data_offset</span><br/><span class="orth-T_WHITESPACE">	</span><span class="orth-T_VAR_DECL-type">int</span> <span class="orth-T_VAR_DECL-name">xhsize</span><br/><span class="orth-T_WHITESPACE">	</span><span class="orth-T_VAR_DECL-type">int</span> <span class="orth-T_VAR_DECL-name">width</span><br/><span class="orth-T_WHITESPACE">	</span><span class="orth-T_VAR_DECL-type">int</span> <span class="orth-T_VAR_DECL-name">height</span><br/><span class="orth-T_WHITESPACE">	</span><span class="orth-T_VAR_DECL-type">short</span> <span class="orth-T_VAR_DECL-name">planes</span><br/><span class="orth-T_WHITESPACE">	</span><span class="orth-T_VAR_DECL-type">short</span> <span class="orth-T_VAR_DECL-name">bits</span><br/><span class="orth-T_WHITESPACE">	</span><span class="orth-T_VAR_DECL-type">int</span> <span class="orth-T_VAR_DECL-name">compression</span><br/><span class="orth-T_WHITESPACE">	</span><span class="orth-T_VAR_DECL-type">int</span> <span class="orth-T_VAR_DECL-name">imgsize</span><br/><span class="orth-T_WHITESPACE">	</span><span class="orth-T_VAR_DECL-type">int</span> <span class="orth-T_VAR_DECL-name">xres</span><br/><span class="orth-T_WHITESPACE">	</span><span class="orth-T_VAR_DECL-type">int</span> <span class="orth-T_VAR_DECL-name">yres</span><br/><span class="orth-T_WHITESPACE">	</span><span class="orth-T_VAR_DECL-type">int</span> <span class="orth-T_VAR_DECL-name">ncolors</span><br/><span class="orth-T_WHITESPACE">	</span><span class="orth-T_VAR_DECL-type">int</span> <span class="orth-T_VAR_DECL-name">impcolors</span><br/><br/><span class="orth-T_WHITESPACE">	</span><span class="orth-T_FUNCTIONDECL">function</span><span class="orth-T_ARGLIST_START">(</span><span class="orth-T_ARGLIST_ELEMENT-type">BMPImage</span> <span class="orth-T_ARGLIST_ELEMENT-name">i</span><span class="orth-T_ARGLIST_END">)</span><span class="orth-T_WHITESPACE"> </span><span class="orth-T_FUNCTIONDECL_NAME">BMPImage:get_data</span><span class="orth-T_WHITESPACE"> </span><span class="orth-T_FUNCTIONDECL_RETURNS">-&gt;</span><span class="orth-T_WHITESPACE"> </span><span class="orth-T_FUNCTIONDECL_RETURN_TYPE">ptr</span><span class="orth-T_WHITESPACE"> </span><span class="orth-T_FUNCTIONDECL_DOES">does</span><br/><span class="orth-T_WHITESPACE">	</span><span class="orth-T_RETURN">return</span><span class="orth-T_WHITESPACE"> </span><span class="orth-T_PAREN_OPEN">(</span><span class="orth-T_NAME">i</span><span class="orth-T_CAST">|</span><span class="orth-T_NAME-cast-type">ptr</span><span class="orth-T_PAREN_CLOSE">)</span><span class="orth-T_COLON">:</span><span class="orth-T_NAME-accessor">offset</span><span class="orth-T_PAREN_OPEN">(</span><span class="orth-T_NAME">i</span><span class="orth-T_DOT">.</span><span class="orth-T_NAME-accessor">data_offset</span><span class="orth-T_PAREN_CLOSE">)</span><br/><br/><span class="orth-T_WHITESPACE">	</span><span class="orth-T_FUNCTIONDECL">function</span><span class="orth-T_ARGLIST_START">(</span><span class="orth-T_ARGLIST_ELEMENT-type">BMPImage</span> <span class="orth-T_ARGLIST_ELEMENT-name">i</span><span class="orth-T_ARGLIST_END">)</span><span class="orth-T_WHITESPACE"> </span><span class="orth-T_FUNCTIONDECL_NAME">BMPImage:get_pitch</span><span class="orth-T_WHITESPACE"> </span><span class="orth-T_FUNCTIONDECL_RETURNS">-&gt;</span><span class="orth-T_WHITESPACE"> </span><span class="orth-T_FUNCTIONDECL_RETURN_TYPE">int</span><span class="orth-T_WHITESPACE"> </span><span class="orth-T_FUNCTIONDECL_DOES">does</span><br/><span class="orth-T_WHITESPACE">	</span><span class="orth-T_WHITESPACE">	</span><span class="orth-T_VAR_DECL-type">int</span> <span class="orth-T_VAR_DECL-name">p</span><span class="orth-T_WHITESPACE"> </span><span class="orth-T_ASSIGNMENT">=</span><span class="orth-T_WHITESPACE"> </span><span class="orth-T_PAREN_OPEN">(</span><span class="orth-T_NAME">i</span><span class="orth-T_DOT">.</span><span class="orth-T_NAME-accessor">width</span><span class="orth-T_BINARY_OPERATOR">*</span><span class="orth-T_PAREN_OPEN">(</span><span class="orth-T_NAME">i</span><span class="orth-T_DOT">.</span><span class="orth-T_NAME-accessor">bits</span><span class="orth-T_CAST">|</span><span class="orth-T_NAME-cast-type">int</span><span class="orth-T_BINARY_OPERATOR">/</span><span class="orth-T_INTEGER_LITERAL">8</span><span class="orth-T_PAREN_CLOSE">)</span><span class="orth-T_PAREN_CLOSE">)</span><br/><span class="orth-T_WHITESPACE">	</span><span class="orth-T_WHITESPACE">	</span><span class="orth-T_IF_START">if</span><span class="orth-T_WHITESPACE"> </span><span class="orth-T_PAREN_OPEN">(</span><span class="orth-T_NAME">p</span><span class="orth-T_BINARY_OPERATOR">%</span><span class="orth-T_INTEGER_LITERAL">4</span><span class="orth-T_PAREN_CLOSE">)</span><span class="orth-T_BINARY_OPERATOR">!=</span><span class="orth-T_INTEGER_LITERAL">0</span><span class="orth-T_WHITESPACE"> </span><span class="orth-T_BLOCK_DO">do</span><br/><span class="orth-T_WHITESPACE">	</span><span class="orth-T_WHITESPACE">	</span><span class="orth-T_WHITESPACE">	</span><span class="orth-T_NAME">p</span><span class="orth-T_AUGASSIGN">+=</span><span class="orth-T_INTEGER_LITERAL">4</span><span class="orth-T_BINARY_OPERATOR">-</span><span class="orth-T_PAREN_OPEN">(</span><span class="orth-T_NAME">p</span><span class="orth-T_BINARY_OPERATOR">%</span><span class="orth-T_INTEGER_LITERAL">4</span><span class="orth-T_PAREN_CLOSE">)</span><br/><span class="orth-T_WHITESPACE">	</span><span class="orth-T_WHITESPACE">	</span><span class="orth-T_BLOCK_DONE">done</span><br/><span class="orth-T_WHITESPACE">	</span><span class="orth-T_RETURN">return</span><span class="orth-T_WHITESPACE"> </span><span class="orth-T_NAME">p</span><br/><br/><span class="orth-T_WHITESPACE">	</span><span class="orth-T_FUNCTIONDECL">function</span><span class="orth-T_ARGLIST_START">(</span><span class="orth-T_ARGLIST_ELEMENT-type">BMPImage</span> <span class="orth-T_ARGLIST_ELEMENT-name">i</span><span class="orth-T_ARGLIST_SEPERATOR">,</span><span class="orth-T_WHITESPACE"> </span><span class="orth-T_ARGLIST_ELEMENT-type">int</span> <span class="orth-T_ARGLIST_ELEMENT-name">x</span><span class="orth-T_ARGLIST_SEPERATOR">,</span><span class="orth-T_WHITESPACE"> </span><span class="orth-T_ARGLIST_ELEMENT-type">int</span> <span class="orth-T_ARGLIST_ELEMENT-name">y</span><span class="orth-T_ARGLIST_END">)</span><span class="orth-T_WHITESPACE"> </span><span class="orth-T_FUNCTIONDECL_NAME">BMPImage:get_pixel</span><span class="orth-T_WHITESPACE"> </span><span class="orth-T_FUNCTIONDECL_RETURNS">-&gt;</span><span class="orth-T_WHITESPACE"> </span><span class="orth-T_FUNCTIONDECL_RETURN_TYPE">BMP24ColorCell</span><span class="orth-T_WHITESPACE"> </span><span class="orth-T_FUNCTIONDECL_DOES">does</span><br/><span class="orth-T_WHITESPACE">	</span><span class="orth-T_RETURN">return</span><span class="orth-T_WHITESPACE"> </span><span class="orth-T_NAME">i</span><span class="orth-T_COLON">:</span><span class="orth-T_NAME-accessor">get_data</span><span class="orth-T_PAREN_OPEN">(</span><span class="orth-T_PAREN_CLOSE">)</span><span class="orth-T_COLON">:</span><span class="orth-T_NAME-accessor">offset</span><span class="orth-T_PAREN_OPEN">(</span><span class="orth-T_PAREN_OPEN">(</span><span class="orth-T_NAME">i</span><span class="orth-T_COLON">:</span><span class="orth-T_NAME-accessor">get_pitch</span><span class="orth-T_PAREN_OPEN">(</span><span class="orth-T_PAREN_CLOSE">)</span><span class="orth-T_BINARY_OPERATOR">*</span><span class="orth-T_PAREN_OPEN">(</span><span class="orth-T_NAME">i</span><span class="orth-T_DOT">.</span><span class="orth-T_NAME-accessor">height</span><span class="orth-T_BINARY_OPERATOR">-</span><span class="orth-T_NAME">y</span><span class="orth-T_PAREN_CLOSE">)</span><span class="orth-T_PAREN_CLOSE">)</span><span class="orth-T_BINARY_OPERATOR">+</span><span class="orth-T_PAREN_OPEN">(</span><span class="orth-T_NAME">x</span><span class="orth-T_BINARY_OPERATOR">*</span><span class="orth-T_PAREN_OPEN">(</span><span class="orth-T_NAME">i</span><span class="orth-T_DOT">.</span><span class="orth-T_NAME-accessor">bits</span><span class="orth-T_CAST">|</span><span class="orth-T_NAME-cast-type">int</span><span class="orth-T_BINARY_OPERATOR">/</span><span class="orth-T_INTEGER_LITERAL">8</span><span class="orth-T_PAREN_CLOSE">)</span><span class="orth-T_PAREN_CLOSE">)</span><span class="orth-T_PAREN_CLOSE">)</span><span class="orth-T_CAST">|</span><span class="orth-T_NAME-cast-type">BMP24ColorCell</span><br/><span class="orth-T_TYPEDECL_END">endtype</span><br/><br/><span class="orth-T_FUNCTIONDECL">function</span><span class="orth-T_ARGLIST_START">(</span><span class="orth-T_ARGLIST_ELEMENT-type">cstr</span> <span class="orth-T_ARGLIST_ELEMENT-name">args</span><span class="orth-T_ARGLIST_END">)</span><span class="orth-T_WHITESPACE"> </span><span class="orth-T_FUNCTIONDECL_NAME">kc_draw_bmp</span><span class="orth-T_WHITESPACE"> </span><span class="orth-T_FUNCTIONDECL_RETURNS">-&gt;</span><span class="orth-T_WHITESPACE"> </span><span class="orth-T_FUNCTIONDECL_RETURN_TYPE">void</span><span class="orth-T_WHITESPACE"> </span><span class="orth-T_FUNCTIONDECL_DOES">does</span><br/><span class="orth-T_WHITESPACE">	</span><span class="orth-T_VAR_DECL-type">MultibootModuleInfo</span> <span class="orth-T_VAR_DECL-name">mod</span><span class="orth-T_WHITESPACE"> </span><span class="orth-T_ASSIGNMENT">=</span><span class="orth-T_WHITESPACE"> </span><span class="orth-T_NAME">mbinfo</span><span class="orth-T_COLON">:</span><span class="orth-T_NAME-accessor">get_mod_by_args</span><span class="orth-T_PAREN_OPEN">(</span><span class="orth-T_NAME">args</span><span class="orth-T_PAREN_CLOSE">)</span><br/><br/><span class="orth-T_WHITESPACE">	</span><span class="orth-T_IF_START">if</span><span class="orth-T_WHITESPACE"> </span><span class="orth-T_NAME">mod</span><span class="orth-T_CAST">|</span><span class="orth-T_NAME-cast-type">ptr</span><span class="orth-T_CAST">|</span><span class="orth-T_NAME-cast-type">int</span><span class="orth-T_WHITESPACE"> </span><span class="orth-T_BINARY_OPERATOR">==</span><span class="orth-T_WHITESPACE"> </span><span class="orth-T_INTEGER_LITERAL">0</span><span class="orth-T_WHITESPACE"> </span><span class="orth-T_BLOCK_DO">do</span><br/><span class="orth-T_WHITESPACE">	</span><span class="orth-T_WHITESPACE">	</span><span class="orth-T_NAME">kterm</span><span class="orth-T_COLON">:</span><span class="orth-T_NAME-accessor">printl</span><span class="orth-T_PAREN_OPEN">(</span><span class="orth-T_STRING_LITERAL">&quot;Invalid module&quot;</span><span class="orth-T_PAREN_CLOSE">)</span><br/><span class="orth-T_WHITESPACE">	</span><span class="orth-T_WHITESPACE">	</span><span class="orth-T_RETURN">return</span><br/><span class="orth-T_WHITESPACE">	</span><span class="orth-T_BLOCK_DONE">done</span><br/><br/><span class="orth-T_WHITESPACE">	</span><span class="orth-T_VAR_DECL-type">BMPImage</span> <span class="orth-T_VAR_DECL-name">img</span><span class="orth-T_WHITESPACE"> </span><span class="orth-T_ASSIGNMENT">=</span><span class="orth-T_WHITESPACE"> </span><span class="orth-T_NAME">mod</span><span class="orth-T_DOT">.</span><span class="orth-T_NAME-accessor">contents</span><span class="orth-T_CAST">|</span><span class="orth-T_NAME-cast-type">BMPImage</span><br/><br/><span class="orth-T_WHITESPACE">	</span><span class="orth-T_IF_START">if</span><span class="orth-T_WHITESPACE"> </span><span class="orth-T_NAME">img</span><span class="orth-T_DOT">.</span><span class="orth-T_NAME-accessor">magic_B</span><span class="orth-T_BINARY_OPERATOR">!=</span><span class="orth-T_STRING_LITERAL">&quot;B&quot;</span><span class="orth-T_COLON">:</span><span class="orth-T_NAME-accessor">ord</span><span class="orth-T_PAREN_OPEN">(</span><span class="orth-T_PAREN_CLOSE">)</span><span class="orth-T_CAST">|</span><span class="orth-T_NAME-cast-type">byte</span><span class="orth-T_WHITESPACE"> </span><span class="orth-T_BLOCK_DO">do</span><br/><span class="orth-T_WHITESPACE">	</span><span class="orth-T_WHITESPACE">	</span><span class="orth-T_NAME">kterm</span><span class="orth-T_COLON">:</span><span class="orth-T_NAME-accessor">printl</span><span class="orth-T_PAREN_OPEN">(</span><span class="orth-T_STRING_LITERAL">&quot;Not a BMP ([0]!=B)&quot;</span><span class="orth-T_PAREN_CLOSE">)</span><br/><span class="orth-T_WHITESPACE">	</span><span class="orth-T_WHITESPACE">	</span><span class="orth-T_RETURN">return</span><br/><span class="orth-T_WHITESPACE">	</span><span class="orth-T_BLOCK_DONE">done</span><br/><br/><span class="orth-T_WHITESPACE">	</span><span class="orth-T_IF_START">if</span><span class="orth-T_WHITESPACE"> </span><span class="orth-T_NAME">img</span><span class="orth-T_DOT">.</span><span class="orth-T_NAME-accessor">magic_M</span><span class="orth-T_BINARY_OPERATOR">!=</span><span class="orth-T_STRING_LITERAL">&quot;M&quot;</span><span class="orth-T_COLON">:</span><span class="orth-T_NAME-accessor">ord</span><span class="orth-T_PAREN_OPEN">(</span><span class="orth-T_PAREN_CLOSE">)</span><span class="orth-T_CAST">|</span><span class="orth-T_NAME-cast-type">byte</span><span class="orth-T_WHITESPACE"> </span><span class="orth-T_BLOCK_DO">do</span><br/><span class="orth-T_WHITESPACE">	</span><span class="orth-T_WHITESPACE">	</span><span class="orth-T_NAME">kterm</span><span class="orth-T_COLON">:</span><span class="orth-T_NAME-accessor">printl</span><span class="orth-T_PAREN_OPEN">(</span><span class="orth-T_STRING_LITERAL">&quot;Not a BMP ([0]!=M)&quot;</span><span class="orth-T_PAREN_CLOSE">)</span><br/><span class="orth-T_WHITESPACE">	</span><span class="orth-T_WHITESPACE">	</span><span class="orth-T_RETURN">return</span><br/><span class="orth-T_WHITESPACE">	</span><span class="orth-T_BLOCK_DONE">done</span><br/><span class="orth-T_WHITESPACE">	</span><br/><span class="orth-T_WHITESPACE">	</span><span class="orth-T_IF_START">if</span><span class="orth-T_WHITESPACE"> </span><span class="orth-T_NAME">img</span><span class="orth-T_DOT">.</span><span class="orth-T_NAME-accessor">compression</span><span class="orth-T_BINARY_OPERATOR">!=</span><span class="orth-T_INTEGER_LITERAL">0</span><span class="orth-T_WHITESPACE"> </span><span class="orth-T_BLOCK_DO">do</span><br/><span class="orth-T_WHITESPACE">	</span><span class="orth-T_WHITESPACE">	</span><span class="orth-T_NAME">kterm</span><span class="orth-T_COLON">:</span><span class="orth-T_NAME-accessor">printl</span><span class="orth-T_PAREN_OPEN">(</span><span class="orth-T_STRING_LITERAL">&quot;Don&#x27;t know how to handle compressed BMPs&quot;</span><span class="orth-T_PAREN_CLOSE">)</span><br/><span class="orth-T_WHITESPACE">	</span><span class="orth-T_WHITESPACE">	</span><span class="orth-T_RETURN">return</span><br/><span class="orth-T_WHITESPACE">	</span><span class="orth-T_BLOCK_DONE">done</span><br/><br/><span class="orth-T_WHITESPACE">	</span><span class="orth-T_IF_START">if</span><span class="orth-T_WHITESPACE"> </span><span class="orth-T_NAME">img</span><span class="orth-T_DOT">.</span><span class="orth-T_NAME-accessor">bits</span><span class="orth-T_CAST">|</span><span class="orth-T_NAME-cast-type">int</span><span class="orth-T_BINARY_OPERATOR">!=</span><span class="orth-T_INTEGER_LITERAL">24</span><span class="orth-T_WHITESPACE"> </span><span class="orth-T_BLOCK_DO">do</span><br/><span class="orth-T_WHITESPACE">	</span><span class="orth-T_WHITESPACE">	</span><span class="orth-T_NAME">kterm</span><span class="orth-T_COLON">:</span><span class="orth-T_NAME-accessor">printl</span><span class="orth-T_PAREN_OPEN">(</span><span class="orth-T_STRING_LITERAL">&quot;Unknown depth (must == 24)&quot;</span><span class="orth-T_PAREN_CLOSE">)</span><br/><span class="orth-T_WHITESPACE">	</span><span class="orth-T_WHITESPACE">	</span><span class="orth-T_RETURN">return</span><br/><span class="orth-T_WHITESPACE">	</span><span class="orth-T_BLOCK_DONE">done</span><br/><br/><span class="orth-T_WHITESPACE">	</span><span class="orth-T_VAR_DECL-type">Framebuffer</span> <span class="orth-T_VAR_DECL-name">sysfb</span><span class="orth-T_ASSIGNMENT">=</span><span class="orth-T_NAME">Framebuffer</span><span class="orth-T_DOUBLECOLON">::</span><span class="orth-T_NAME-accessor">from_mbinfo</span><span class="orth-T_PAREN_OPEN">(</span><span class="orth-T_NAME">mbinfo</span><span class="orth-T_PAREN_CLOSE">)</span><br/><br/><span class="orth-T_WHITESPACE">	</span><span class="orth-T_VAR_DECL-type">int</span> <span class="orth-T_VAR_DECL-name">y</span><span class="orth-T_ASSIGNMENT">=</span><span class="orth-T_INTEGER_LITERAL">0</span><br/><span class="orth-T_WHITESPACE">	</span><span class="orth-T_VAR_DECL-type">int</span> <span class="orth-T_VAR_DECL-name">x</span><br/><span class="orth-T_WHITESPACE">	</span><span class="orth-T_VAR_DECL-type">BMP24ColorCell</span> <span class="orth-T_VAR_DECL-name">color</span><br/><span class="orth-T_WHITESPACE">	</span><span class="orth-T_WHILE_START">while</span><span class="orth-T_WHITESPACE"> </span><span class="orth-T_NAME">y</span><span class="orth-T_BINARY_OPERATOR">&lt;</span><span class="orth-T_NAME">img</span><span class="orth-T_DOT">.</span><span class="orth-T_NAME-accessor">height</span><span class="orth-T_WHITESPACE"> </span><span class="orth-T_BLOCK_DO">do</span><br/><span class="orth-T_WHITESPACE">	</span><span class="orth-T_WHITESPACE">	</span><span class="orth-T_NAME">x</span><span class="orth-T_ASSIGNMENT">=</span><span class="orth-T_INTEGER_LITERAL">0</span><br/><span class="orth-T_WHITESPACE">	</span><span class="orth-T_WHITESPACE">	</span><span class="orth-T_WHILE_START">while</span><span class="orth-T_WHITESPACE"> </span><span class="orth-T_NAME">x</span><span class="orth-T_BINARY_OPERATOR">&lt;</span><span class="orth-T_NAME">img</span><span class="orth-T_DOT">.</span><span class="orth-T_NAME-accessor">width</span><span class="orth-T_WHITESPACE"> </span><span class="orth-T_BLOCK_DO">do</span><br/><span class="orth-T_WHITESPACE">	</span><span class="orth-T_WHITESPACE">	</span><span class="orth-T_WHITESPACE">	</span><span class="orth-T_NAME">color</span><span class="orth-T_ASSIGNMENT">=</span><span class="orth-T_NAME">img</span><span class="orth-T_COLON">:</span><span class="orth-T_NAME-accessor">get_pixel</span><span class="orth-T_PAREN_OPEN">(</span><span class="orth-T_NAME">x</span><span class="orth-T_COMMA">,</span><span class="orth-T_WHITESPACE"> </span><span class="orth-T_NAME">y</span><span class="orth-T_PAREN_CLOSE">)</span><br/><span class="orth-T_WHITESPACE">	</span><span class="orth-T_WHITESPACE">	</span><span class="orth-T_WHITESPACE">	</span><span class="orth-T_NAME">sysfb</span><span class="orth-T_COLON">:</span><span class="orth-T_NAME-accessor">setpx</span><span class="orth-T_PAREN_OPEN">(</span><span class="orth-T_NAME">x</span><span class="orth-T_COMMA">,</span><span class="orth-T_WHITESPACE"> </span><span class="orth-T_NAME">y</span><span class="orth-T_COMMA">,</span><span class="orth-T_WHITESPACE"> </span><span class="orth-T_NAME">color</span><span class="orth-T_DOT">.</span><span class="orth-T_NAME-accessor">r</span><span class="orth-T_CAST">|</span><span class="orth-T_NAME-cast-type">int</span><span class="orth-T_COMMA">,</span><span class="orth-T_WHITESPACE"> </span><span class="orth-T_NAME">color</span><span class="orth-T_DOT">.</span><span class="orth-T_NAME-accessor">g</span><span class="orth-T_CAST">|</span><span class="orth-T_NAME-cast-type">int</span><span class="orth-T_COMMA">,</span><span class="orth-T_WHITESPACE"> </span><span class="orth-T_NAME">color</span><span class="orth-T_DOT">.</span><span class="orth-T_NAME-accessor">b</span><span class="orth-T_CAST">|</span><span class="orth-T_NAME-cast-type">int</span><span class="orth-T_PAREN_CLOSE">)</span><br/><span class="orth-T_WHITESPACE">	</span><span class="orth-T_WHITESPACE">	</span><span class="orth-T_WHITESPACE">	</span><span class="orth-T_NAME">x</span><span class="orth-T_AUGASSIGN">+=</span><span class="orth-T_INTEGER_LITERAL">1</span><br/><span class="orth-T_WHITESPACE">	</span><span class="orth-T_WHITESPACE">	</span><span class="orth-T_BLOCK_DONE">done</span><br/><span class="orth-T_WHITESPACE">	</span><span class="orth-T_WHITESPACE">	</span><span class="orth-T_NAME">y</span><span class="orth-T_AUGASSIGN">+=</span><span class="orth-T_INTEGER_LITERAL">1</span><br/><span class="orth-T_WHITESPACE">	</span><span class="orth-T_BLOCK_DONE">done</span><br/><span class="orth-T_RETURN">return</span><br/><span class="orth-T_WHITESPACE"> </span>

			</pre>
		</body>
	</html>